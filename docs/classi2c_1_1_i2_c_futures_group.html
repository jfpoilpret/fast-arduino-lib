<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FastArduino: i2c::I2CFuturesGroup&lt; MANAGER &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FastArduino
   &#160;<span id="projectnumber">v1.8</span>
   </div>
   <div id="projectbrief">C++ library to build fast but small Arduino/AVR projects</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classi2c_1_1_i2_c_futures_group.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classi2c_1_1_i2_c_futures_group-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">i2c::I2CFuturesGroup&lt; MANAGER &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Abstract class to allow aggregation of several futures in relation to I2C transactions.  
 <a href="classi2c_1_1_i2_c_futures_group.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="i2c__device__utilities_8h_source.html">fastarduino/i2c_device_utilities.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for i2c::I2CFuturesGroup&lt; MANAGER &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classi2c_1_1_i2_c_futures_group__inherit__graph.png" border="0" usemap="#ai2c_1_1_i2_c_futures_group_3_01_m_a_n_a_g_e_r_01_4_inherit__map" alt="Inheritance graph"/></div>
<map name="i2c_1_1_i2_c_futures_group_3_01_m_a_n_a_g_e_r_01_4_inherit__map" id="i2c_1_1_i2_c_futures_group_3_01_m_a_n_a_g_e_r_01_4_inherit__map">
<area shape="rect" title="Abstract class to allow aggregation of several futures in relation to I2C transactions." alt="" coords="224,53,371,94"/>
<area shape="rect" href="classdevices_1_1vl53l0x_1_1_v_l53_l0_x_1_1_get_g_p_i_o_settings_future.html" title="Future to get device current GPIO settings." alt="" coords="419,5,649,61"/>
<area shape="rect" href="classdevices_1_1vl53l0x_1_1_v_l53_l0_x_1_1_set_g_p_i_o_settings_future.html" title="Future to set device GPIO settings." alt="" coords="419,85,649,141"/>
<area shape="rect" title=" " alt="" coords="5,53,176,94"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for i2c::I2CFuturesGroup&lt; MANAGER &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classi2c_1_1_i2_c_futures_group__coll__graph.png" border="0" usemap="#ai2c_1_1_i2_c_futures_group_3_01_m_a_n_a_g_e_r_01_4_coll__map" alt="Collaboration graph"/></div>
<map name="i2c_1_1_i2_c_futures_group_3_01_m_a_n_a_g_e_r_01_4_coll__map" id="i2c_1_1_i2_c_futures_group_3_01_m_a_n_a_g_e_r_01_4_coll__map">
<area shape="rect" title="Abstract class to allow aggregation of several futures in relation to I2C transactions." alt="" coords="17,95,164,136"/>
<area shape="rect" title=" " alt="" coords="5,5,176,47"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a88e4a540f7d0f268373c533d16d4670a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classi2c_1_1_i2_c_futures_group.html#a88e4a540f7d0f268373c533d16d4670a">I2CFuturesGroup</a> (ABSTRACT_FUTURE **futures, uint8_t size, STATUS_LISTENER *status_listener=nullptr)</td></tr>
<tr class="memdesc:a88e4a540f7d0f268373c533d16d4670a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by subclass constructor, this constructs a new <a class="el" href="classi2c_1_1_i2_c_futures_group.html" title="Abstract class to allow aggregation of several futures in relation to I2C transactions.">I2CFuturesGroup</a> instance with the provided list of <code>futures</code>.  <a href="classi2c_1_1_i2_c_futures_group.html#a88e4a540f7d0f268373c533d16d4670a">More...</a><br /></td></tr>
<tr class="separator:a88e4a540f7d0f268373c533d16d4670a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e826619debb355293c07c47dcb6792c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classi2c_1_1_i2_c_futures_group.html#a3e826619debb355293c07c47dcb6792c">start</a> (typename PARENT::DEVICE &amp;device)</td></tr>
<tr class="memdesc:a3e826619debb355293c07c47dcb6792c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the I2C transactions needed by this group of futures.  <a href="classi2c_1_1_i2_c_futures_group.html#a3e826619debb355293c07c47dcb6792c">More...</a><br /></td></tr>
<tr class="separator:a3e826619debb355293c07c47dcb6792c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename MANAGER&gt;<br />
class i2c::I2CFuturesGroup&lt; MANAGER &gt;</h3>

<p>Abstract class to allow aggregation of several futures in relation to I2C transactions. </p>
<p>This allows to <code>await()</code> for all futures, or query the overall <code>status()</code> of the group. This enables I2C device support developers to handle complex I2C transactions where several distinct Futures must be used. Suclasses shall define all needed individual Futures as members, pass them to <a class="el" href="classi2c_1_1_i2_c_futures_group.html" title="Abstract class to allow aggregation of several futures in relation to I2C transactions.">I2CFuturesGroup</a> constructor and call <code><a class="el" href="classfuture_1_1_abstract_futures_group.html#ad4662d690087c9bccd480a19b60ed50e" title="Called from constructors of subclasses, this method allows this group to listen for the status of all...">future::AbstractFuturesGroup::init()</a></code>. In addition, subclasses may define a method <code>get()</code> that will handle aggregation of results of its individual futures.</p>
<p>The following is en excerpt of VL53L0X showing <code>GetGPIOSettingsFuture</code> future definition and its usage in <code>get_GPIO_settings()</code> method: </p><div class="fragment"><div class="line"><span class="keyword">class </span>GetGPIOSettingsFuture : <span class="keyword">public</span> <a class="code" href="classi2c_1_1_i2_c_futures_group.html#a88e4a540f7d0f268373c533d16d4670a">I2CFuturesGroup</a></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">public</span>:</div>
<div class="line">    GetGPIOSettingsFuture() : <a class="code" href="classi2c_1_1_i2_c_futures_group.html#a88e4a540f7d0f268373c533d16d4670a">I2CFuturesGroup</a>{futures_, NUM_FUTURES} {</div>
<div class="line">        <a class="code" href="namespaceboard.html#a2529f85498783a75dc75c281e0b754d3">I2CFuturesGroup::init</a>(futures_);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">bool</span> get(vl53l0x::GPIOSettings&amp; settings) {</div>
<div class="line">        <span class="keywordflow">if</span> (this-&gt;await() != <a class="code" href="namespacefuture.html#a9f72173fcd5be9bfef028415665efbe4a2baa69eafc7204f3bd8648eba580c489">future::FutureStatus::READY</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">        <a class="code" href="namespacedevices_1_1vl53l0x.html#a6779d407b6c38c353138058714af81cb">vl53l0x::GPIOFunction</a> <span class="keyword">function</span>;</div>
<div class="line">        read_config_.get(<span class="keyword">function</span>);</div>
<div class="line">        uint8_t active_high;</div>
<div class="line">        read_GPIO_active_high_.get(active_high);</div>
<div class="line">        ...</div>
<div class="line">        settings = vl53l0x::GPIOSettings{<span class="keyword">function</span>, bool(active_high &amp; 0x10), ...};</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    TReadRegisterFuture&lt;Register::SYSTEM_INTERRUPT_CONFIG_GPIO, vl53l0x::GPIOFunction&gt; read_config_{};</div>
<div class="line">    TReadRegisterFuture&lt;Register::GPIO_HV_MUX_ACTIVE_HIGH&gt; read_GPIO_active_high_{};</div>
<div class="line">    ...</div>
<div class="line">    <span class="keyword">static</span> constexpr uint8_t NUM_FUTURES = 4;</div>
<div class="line">    ABSTRACT_FUTURE* futures_[NUM_FUTURES] = {&amp;read_config_, &amp;read_GPIO_active_high_,...};</div>
<div class="line">    <span class="keyword">friend</span> VL53L0X&lt;MANAGER&gt;;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> get_GPIO_settings(GetGPIOSettingsFuture&amp; <a class="code" href="namespacefuture.html">future</a>) {</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code" href="namespacefuture.html">future</a>.start(*<span class="keyword">this</span>) ? 0 : <a class="code" href="namespacefuture.html">future</a>.error());</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">MANAGER</td><td>the type of I2C Manager used to handle I2C communication </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="i2c__device__utilities_8h_source.html#l00431">431</a> of file <a class="el" href="i2c__device__utilities_8h_source.html">i2c_device_utilities.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a88e4a540f7d0f268373c533d16d4670a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88e4a540f7d0f268373c533d16d4670a">&#9670;&nbsp;</a></span>I2CFuturesGroup()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MANAGER &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classi2c_1_1_i2_c_futures_group.html">i2c::I2CFuturesGroup</a>&lt; MANAGER &gt;::<a class="el" href="classi2c_1_1_i2_c_futures_group.html">I2CFuturesGroup</a> </td>
          <td>(</td>
          <td class="paramtype">ABSTRACT_FUTURE **&#160;</td>
          <td class="paramname"><em>futures</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">STATUS_LISTENER *&#160;</td>
          <td class="paramname"><em>status_listener</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called by subclass constructor, this constructs a new <a class="el" href="classi2c_1_1_i2_c_futures_group.html" title="Abstract class to allow aggregation of several futures in relation to I2C transactions.">I2CFuturesGroup</a> instance with the provided list of <code>futures</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">futures</td><td>the array of futures to be handled by this group of futures </td></tr>
    <tr><td class="paramname">size</td><td>the number of futures in <code>futures</code> </td></tr>
    <tr><td class="paramname">status_listener</td><td>an optional listener to status changes on this future </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="i2c__device__utilities_8h_source.html#l00448">448</a> of file <a class="el" href="i2c__device__utilities_8h_source.html">i2c_device_utilities.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3e826619debb355293c07c47dcb6792c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e826619debb355293c07c47dcb6792c">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MANAGER &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classi2c_1_1_i2_c_futures_group.html">i2c::I2CFuturesGroup</a>&lt; MANAGER &gt;::start </td>
          <td>(</td>
          <td class="paramtype">typename PARENT::DEVICE &amp;&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start the I2C transactions needed by this group of futures. </p>
<p>This is either called by the subclass or directly by the I2C device support class (if declared friend of the subclass).</p>
<dl class="section warning"><dt>Warning</dt><dd>Asynchronous API! If the currently active I2C Manager is asynchronous, then this method is too! </dd>
<dd>
Blocking API! If the currently active I2C Manager is synchronous, then this method is blocking!</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>the <code><a class="el" href="classi2c_1_1_i2_c_device.html" title="Base class for all I2C devices.">i2c::I2CDevice</a></code> subclass instance that shall handle I2C commands to the I2C device </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>if the first I2C command could be launched successfully </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="i2c__device__utilities_8h_source.html#l00466">466</a> of file <a class="el" href="i2c__device__utilities_8h_source.html">i2c_device_utilities.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>fastarduino/<a class="el" href="i2c__device__utilities_8h_source.html">i2c_device_utilities.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="anamespacefuture_html"><div class="ttname"><a href="namespacefuture.html">future</a></div><div class="ttdoc">Contains the API around Future implementation.</div><div class="ttdef"><b>Definition:</b> <a href="future_8cpp_source.html#l00017">future.cpp:18</a></div></div>
<div class="ttc" id="anamespacefuture_html_a9f72173fcd5be9bfef028415665efbe4a2baa69eafc7204f3bd8648eba580c489"><div class="ttname"><a href="namespacefuture.html#a9f72173fcd5be9bfef028415665efbe4a2baa69eafc7204f3bd8648eba580c489">future::FutureStatus::READY</a></div><div class="ttdeci">@ READY</div><div class="ttdoc">The status of a Future once its output value has been fully set by a provider.</div></div>
<div class="ttc" id="aclassi2c_1_1_i2_c_futures_group_html_a88e4a540f7d0f268373c533d16d4670a"><div class="ttname"><a href="classi2c_1_1_i2_c_futures_group.html#a88e4a540f7d0f268373c533d16d4670a">i2c::I2CFuturesGroup::I2CFuturesGroup</a></div><div class="ttdeci">I2CFuturesGroup(ABSTRACT_FUTURE **futures, uint8_t size, STATUS_LISTENER *status_listener=nullptr)</div><div class="ttdoc">Called by subclass constructor, this constructs a new I2CFuturesGroup instance with the provided list...</div><div class="ttdef"><b>Definition:</b> <a href="i2c__device__utilities_8h_source.html#l00448">i2c_device_utilities.h:448</a></div></div>
<div class="ttc" id="anamespaceboard_html_a2529f85498783a75dc75c281e0b754d3"><div class="ttname"><a href="namespaceboard.html#a2529f85498783a75dc75c281e0b754d3">board::init</a></div><div class="ttdeci">static void init()</div><div class="ttdoc">Performs special initialization for the target MCU.</div><div class="ttdef"><b>Definition:</b> <a href="empty_8h_source.html#l00043">empty.h:43</a></div></div>
<div class="ttc" id="anamespacedevices_1_1vl53l0x_html_a6779d407b6c38c353138058714af81cb"><div class="ttname"><a href="namespacedevices_1_1vl53l0x.html#a6779d407b6c38c353138058714af81cb">devices::vl53l0x::GPIOFunction</a></div><div class="ttdeci">GPIOFunction</div><div class="ttdoc">Possible triggers for VL53L0X GPIO pin.</div><div class="ttdef"><b>Definition:</b> <a href="vl53l0x__types_8h_source.html#l00238">vl53l0x_types.h:239</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacei2c.html">i2c</a></li><li class="navelem"><a class="el" href="classi2c_1_1_i2_c_futures_group.html">I2CFuturesGroup</a></li>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>

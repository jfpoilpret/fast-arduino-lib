<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FastArduino: devices::sonar Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">FastArduino<span id="projectnumber">&#160;v1.10</span>
   </div>
   <div id="projectbrief">C++ library to build fast but small Arduino/AVR projects</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespacedevices_1_1sonar.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">devices::sonar Namespace Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Defines the API for sonar support.  
<a href="namespacedevices_1_1sonar.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdevices_1_1sonar_1_1_abstract_sonar.html">AbstractSonar</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">An abstract base class for some sonar classes defined as part of this API.  <a href="classdevices_1_1sonar_1_1_abstract_sonar.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdevices_1_1sonar_1_1_h_c_s_r04.html">HCSR04</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdevices_1_1sonar_1_1_multi_h_c_s_r04.html">MultiHCSR04</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This template class supports up to 8 HC-SR04 sonars (or equivalent sensors), with their trigger pins gathered and connected to only one MCU pin, and all echo pins connected to the same MCU <code><a class="el" href="namespaceboard.html#a151323e5de5adf93f6bcdfdd64fa1eb1" title="Defines all available ports of the target MCU.">board::Port</a></code>.  <a href="classdevices_1_1sonar_1_1_multi_h_c_s_r04.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdevices_1_1sonar_1_1_sonar_event.html">SonarEvent</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This type holds information about events occurring within <code><a class="el" href="classdevices_1_1sonar_1_1_multi_h_c_s_r04.html" title="This template class supports up to 8 HC-SR04 sonars (or equivalent sensors), with their trigger pins ...">MultiHCSR04</a></code> handler.  <a href="structdevices_1_1sonar_1_1_sonar_event.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a1609913f480a742890ace74e1882ac5e"><td class="memTemplParams" colspan="2">template&lt;<a class="el" href="namespaceboard.html#aa6b4a447b2fccb95185367644c3f28bb">board::Timer</a> NTIMER_, <a class="el" href="namespaceboard.html#a5082846fef8fdfb8c8cbcf1163c7b404">board::DigitalPin</a> TRIGGER_, <a class="el" href="namespaceboard.html#a5082846fef8fdfb8c8cbcf1163c7b404">board::DigitalPin</a> ECHO_&gt; </td></tr>
<tr class="memitem:a1609913f480a742890ace74e1882ac5e"><td class="memTemplItemLeft" align="right" valign="top">using&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacedevices_1_1sonar.html#a1609913f480a742890ace74e1882ac5e">BLOCKING_HCSR04</a> = <a class="el" href="classdevices_1_1sonar_1_1_h_c_s_r04.html">HCSR04</a>&lt; NTIMER_, TRIGGER_, ECHO_, <a class="el" href="namespacedevices_1_1sonar.html#aaf92144d703d09314a02aaf53bdc9b74a72323e5457d8fb855145bfee934aa415">SonarType::BLOCKING</a> &gt;</td></tr>
<tr class="memdesc:a1609913f480a742890ace74e1882ac5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This template class supports one HC-SR04 sonar (or equivalent sensor), connected to the MCU via 2 pins.  <a href="namespacedevices_1_1sonar.html#a1609913f480a742890ace74e1882ac5e">More...</a><br /></td></tr>
<tr class="separator:a1609913f480a742890ace74e1882ac5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a549182f59f1965da0341ffc4137f3a1e"><td class="memTemplParams" colspan="2">template&lt;<a class="el" href="namespaceboard.html#aa6b4a447b2fccb95185367644c3f28bb">board::Timer</a> NTIMER_, <a class="el" href="namespaceboard.html#a5082846fef8fdfb8c8cbcf1163c7b404">board::DigitalPin</a> TRIGGER_, <a class="el" href="namespaceboard.html#adea66670db50b076b2c145657aa587f7">board::ExternalInterruptPin</a> ECHO_&gt; </td></tr>
<tr class="memitem:a549182f59f1965da0341ffc4137f3a1e"><td class="memTemplItemLeft" align="right" valign="top">using&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacedevices_1_1sonar.html#a549182f59f1965da0341ffc4137f3a1e">ASYNC_INT_HCSR04</a> = <a class="el" href="classdevices_1_1sonar_1_1_h_c_s_r04.html">HCSR04</a>&lt; NTIMER_, TRIGGER_, <a class="el" href="namespaceboard.html#a8a587b48884f6b62938abfbcf1484130">board::EXT_PIN</a>&lt; ECHO_ &gt;(), <a class="el" href="namespacedevices_1_1sonar.html#aaf92144d703d09314a02aaf53bdc9b74adea23c77e6b206537cb20a44485130be">SonarType::ASYNC_INT</a> &gt;</td></tr>
<tr class="memdesc:a549182f59f1965da0341ffc4137f3a1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This template class supports one HC-SR04 sonar (or equivalent sensor), connected to the MCU via 2 pins.  <a href="namespacedevices_1_1sonar.html#a549182f59f1965da0341ffc4137f3a1e">More...</a><br /></td></tr>
<tr class="separator:a549182f59f1965da0341ffc4137f3a1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bba9656cf69f00d94ab7b571be82457"><td class="memTemplParams" colspan="2">template&lt;<a class="el" href="namespaceboard.html#aa6b4a447b2fccb95185367644c3f28bb">board::Timer</a> NTIMER_, <a class="el" href="namespaceboard.html#a5082846fef8fdfb8c8cbcf1163c7b404">board::DigitalPin</a> TRIGGER_, <a class="el" href="namespaceboard.html#a7abd24b042402c0691c0ad6db604e7da">board::InterruptPin</a> ECHO_&gt; </td></tr>
<tr class="memitem:a7bba9656cf69f00d94ab7b571be82457"><td class="memTemplItemLeft" align="right" valign="top">using&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacedevices_1_1sonar.html#a7bba9656cf69f00d94ab7b571be82457">ASYNC_PCINT_HCSR04</a> = <a class="el" href="classdevices_1_1sonar_1_1_h_c_s_r04.html">HCSR04</a>&lt; NTIMER_, TRIGGER_, <a class="el" href="namespaceboard.html#a817ea24e897a7672b250053baec872a4">board::PCI_PIN</a>&lt; ECHO_ &gt;(), <a class="el" href="namespacedevices_1_1sonar.html#aaf92144d703d09314a02aaf53bdc9b74a4a15eb39b3355ce7db6b06e422f8b322">SonarType::ASYNC_PCINT</a> &gt;</td></tr>
<tr class="memdesc:a7bba9656cf69f00d94ab7b571be82457"><td class="mdescLeft">&#160;</td><td class="mdescRight">This template class supports one HC-SR04 sonar (or equivalent sensor), connected to the MCU via 2 pins.  <a href="namespacedevices_1_1sonar.html#a7bba9656cf69f00d94ab7b571be82457">More...</a><br /></td></tr>
<tr class="separator:a7bba9656cf69f00d94ab7b571be82457"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aaf92144d703d09314a02aaf53bdc9b74"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedevices_1_1sonar.html#aaf92144d703d09314a02aaf53bdc9b74">SonarType</a> : uint8_t { <br />
&#160;&#160;<a class="el" href="namespacedevices_1_1sonar.html#aaf92144d703d09314a02aaf53bdc9b74a72323e5457d8fb855145bfee934aa415">BLOCKING</a>
, <br />
&#160;&#160;<a class="el" href="namespacedevices_1_1sonar.html#aaf92144d703d09314a02aaf53bdc9b74adea23c77e6b206537cb20a44485130be">ASYNC_INT</a>
, <br />
&#160;&#160;<a class="el" href="namespacedevices_1_1sonar.html#aaf92144d703d09314a02aaf53bdc9b74a4a15eb39b3355ce7db6b06e422f8b322">ASYNC_PCINT</a>
<br />
 }</td></tr>
<tr class="memdesc:aaf92144d703d09314a02aaf53bdc9b74"><td class="mdescLeft">&#160;</td><td class="mdescRight">This enum defines the different modes, supported by <code>HCSR04</code>, to calculate the echo pin pulse duration.  <a href="namespacedevices_1_1sonar.html#aaf92144d703d09314a02aaf53bdc9b74">More...</a><br /></td></tr>
<tr class="separator:aaf92144d703d09314a02aaf53bdc9b74"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad1f46b1fd69d9c8c486867572a3cfd89"><td class="memItemLeft" align="right" valign="top">static constexpr uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedevices_1_1sonar.html#ad1f46b1fd69d9c8c486867572a3cfd89">echo_us_to_distance_mm</a> (uint16_t echo_us)</td></tr>
<tr class="memdesc:ad1f46b1fd69d9c8c486867572a3cfd89"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method converts the echo duration, in microseconds, to the distance between the sensor and the reflecting obstacle, in millimeters.  <a href="namespacedevices_1_1sonar.html#ad1f46b1fd69d9c8c486867572a3cfd89">More...</a><br /></td></tr>
<tr class="separator:ad1f46b1fd69d9c8c486867572a3cfd89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3bc97f71928347fa7b883f166235916"><td class="memItemLeft" align="right" valign="top">static constexpr uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedevices_1_1sonar.html#af3bc97f71928347fa7b883f166235916">distance_mm_to_echo_us</a> (uint16_t distance_mm)</td></tr>
<tr class="memdesc:af3bc97f71928347fa7b883f166235916"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method converts the disatnce, in millimeters, between the sensor and a reflecting object, into the expected echo duration, in microseconds.  <a href="namespacedevices_1_1sonar.html#af3bc97f71928347fa7b883f166235916">More...</a><br /></td></tr>
<tr class="separator:af3bc97f71928347fa7b883f166235916"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a45348626a8f4f1dad995f9376cc92770"><td class="memItemLeft" align="right" valign="top">static constexpr const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedevices_1_1sonar.html#a45348626a8f4f1dad995f9376cc92770">SPEED_OF_SOUND</a> = 340UL</td></tr>
<tr class="memdesc:a45348626a8f4f1dad995f9376cc92770"><td class="mdescLeft">&#160;</td><td class="mdescRight">The approximate speed of sound (and ultrasonic) waves, in the air, expressed in meters per second.  <a href="namespacedevices_1_1sonar.html#a45348626a8f4f1dad995f9376cc92770">More...</a><br /></td></tr>
<tr class="separator:a45348626a8f4f1dad995f9376cc92770"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Defines the API for sonar support. </p>
<p >Supported ultrasonic sensors have 2 pins:</p><ul>
<li>one "trigger" pin that, upon a short pulse, will generate ultrasonic waves to be emitted by the sensor</li>
<li>one "echo" pin that, upon reception of the echoed ultrasonic wave, will generate a pulse which duration is the time during which the ultrasonic wave has travelled from the sensor back to the sensor, after reflecting on some obstacle. This API has been tested on HC-SR04 sensors (cheap ultrasonic sensors with a range of 4 meters). </li>
</ul>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a1609913f480a742890ace74e1882ac5e" name="a1609913f480a742890ace74e1882ac5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1609913f480a742890ace74e1882ac5e">&#9670;&#160;</a></span>BLOCKING_HCSR04</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;<a class="el" href="namespaceboard.html#aa6b4a447b2fccb95185367644c3f28bb">board::Timer</a> NTIMER_, <a class="el" href="namespaceboard.html#a5082846fef8fdfb8c8cbcf1163c7b404">board::DigitalPin</a> TRIGGER_, <a class="el" href="namespaceboard.html#a5082846fef8fdfb8c8cbcf1163c7b404">board::DigitalPin</a> ECHO_&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="namespacedevices_1_1sonar.html#a1609913f480a742890ace74e1882ac5e">devices::sonar::BLOCKING_HCSR04</a> = typedef <a class="el" href="classdevices_1_1sonar_1_1_h_c_s_r04.html">HCSR04</a>&lt;NTIMER_, TRIGGER_, ECHO_, <a class="el" href="namespacedevices_1_1sonar.html#aaf92144d703d09314a02aaf53bdc9b74a72323e5457d8fb855145bfee934aa415">SonarType::BLOCKING</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This template class supports one HC-SR04 sonar (or equivalent sensor), connected to the MCU via 2 pins. </p>
<p >Sonar ranging is performed in blocking mode, i.e. <code><a class="el" href="classdevices_1_1sonar_1_1_h_c_s_r04.html#a20893e3685ab8e1774496ba4fe4de911" title="Send a trigger pulse on this sonar and wait until an echo pulse is received, or timeout_ms has elapse...">HCSR04::echo_us()</a></code> method is blocked until ranging is finished or timeout has occurred.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">NTIMER_</td><td>the AVR timer of the <code><a class="el" href="classtimer_1_1_r_t_t.html" title="API to handle a real-time timer.">timer::RTT</a></code> to use for this sonar </td></tr>
    <tr><td class="paramname">TRIGGER_</td><td>the <code><a class="el" href="namespaceboard.html#a5082846fef8fdfb8c8cbcf1163c7b404" title="Defines all available digital input/output pins of the target MCU.">board::DigitalPin</a></code> connected to the sensor trigger pin; that can be any available pin. </td></tr>
    <tr><td class="paramname">ECHO_</td><td>the <code><a class="el" href="namespaceboard.html#a5082846fef8fdfb8c8cbcf1163c7b404" title="Defines all available digital input/output pins of the target MCU.">board::DigitalPin</a></code> connected to the sensor echo pin</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classtimer_1_1_r_t_t.html" title="API to handle a real-time timer.">timer::RTT</a> </dd>
<dd>
<a class="el" href="classdevices_1_1sonar_1_1_h_c_s_r04.html">HCSR04</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="sonar_8h_source.html#l00922">922</a> of file <a class="el" href="sonar_8h_source.html">sonar.h</a>.</p>

</div>
</div>
<a id="a549182f59f1965da0341ffc4137f3a1e" name="a549182f59f1965da0341ffc4137f3a1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a549182f59f1965da0341ffc4137f3a1e">&#9670;&#160;</a></span>ASYNC_INT_HCSR04</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;<a class="el" href="namespaceboard.html#aa6b4a447b2fccb95185367644c3f28bb">board::Timer</a> NTIMER_, <a class="el" href="namespaceboard.html#a5082846fef8fdfb8c8cbcf1163c7b404">board::DigitalPin</a> TRIGGER_, <a class="el" href="namespaceboard.html#adea66670db50b076b2c145657aa587f7">board::ExternalInterruptPin</a> ECHO_&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="namespacedevices_1_1sonar.html#a549182f59f1965da0341ffc4137f3a1e">devices::sonar::ASYNC_INT_HCSR04</a> = typedef <a class="el" href="classdevices_1_1sonar_1_1_h_c_s_r04.html">HCSR04</a>&lt;NTIMER_, TRIGGER_, <a class="el" href="namespaceboard.html#a8a587b48884f6b62938abfbcf1484130">board::EXT_PIN</a>&lt;ECHO_&gt;(), <a class="el" href="namespacedevices_1_1sonar.html#aaf92144d703d09314a02aaf53bdc9b74adea23c77e6b206537cb20a44485130be">SonarType::ASYNC_INT</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This template class supports one HC-SR04 sonar (or equivalent sensor), connected to the MCU via 2 pins. </p>
<p >Sonar ranging is performed in asynchronous mode through an <code><a class="el" href="namespaceboard.html#adea66670db50b076b2c145657aa587f7" title="Defines all digital output pins of target MCU, usable as direct external interrupt pins.">board::ExternalInterruptPin</a></code>.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">NTIMER_</td><td>the AVR timer of the <code><a class="el" href="classtimer_1_1_r_t_t.html" title="API to handle a real-time timer.">timer::RTT</a></code> to use for this sonar </td></tr>
    <tr><td class="paramname">TRIGGER_</td><td>the <code><a class="el" href="namespaceboard.html#a5082846fef8fdfb8c8cbcf1163c7b404" title="Defines all available digital input/output pins of the target MCU.">board::DigitalPin</a></code> connected to the sensor trigger pin; that can be any available pin. </td></tr>
    <tr><td class="paramname">ECHO_</td><td>the <code><a class="el" href="namespaceboard.html#adea66670db50b076b2c145657aa587f7" title="Defines all digital output pins of target MCU, usable as direct external interrupt pins.">board::ExternalInterruptPin</a></code> connected to the sensor echo pin</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classtimer_1_1_r_t_t.html" title="API to handle a real-time timer.">timer::RTT</a> </dd>
<dd>
<a class="el" href="classdevices_1_1sonar_1_1_h_c_s_r04.html">HCSR04</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="sonar_8h_source.html#l00938">938</a> of file <a class="el" href="sonar_8h_source.html">sonar.h</a>.</p>

</div>
</div>
<a id="a7bba9656cf69f00d94ab7b571be82457" name="a7bba9656cf69f00d94ab7b571be82457"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bba9656cf69f00d94ab7b571be82457">&#9670;&#160;</a></span>ASYNC_PCINT_HCSR04</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;<a class="el" href="namespaceboard.html#aa6b4a447b2fccb95185367644c3f28bb">board::Timer</a> NTIMER_, <a class="el" href="namespaceboard.html#a5082846fef8fdfb8c8cbcf1163c7b404">board::DigitalPin</a> TRIGGER_, <a class="el" href="namespaceboard.html#a7abd24b042402c0691c0ad6db604e7da">board::InterruptPin</a> ECHO_&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="namespacedevices_1_1sonar.html#a7bba9656cf69f00d94ab7b571be82457">devices::sonar::ASYNC_PCINT_HCSR04</a> = typedef <a class="el" href="classdevices_1_1sonar_1_1_h_c_s_r04.html">HCSR04</a>&lt;NTIMER_, TRIGGER_, <a class="el" href="namespaceboard.html#a817ea24e897a7672b250053baec872a4">board::PCI_PIN</a>&lt;ECHO_&gt;(), <a class="el" href="namespacedevices_1_1sonar.html#aaf92144d703d09314a02aaf53bdc9b74a4a15eb39b3355ce7db6b06e422f8b322">SonarType::ASYNC_PCINT</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This template class supports one HC-SR04 sonar (or equivalent sensor), connected to the MCU via 2 pins. </p>
<p >Sonar ranging is performed in asynchronous mode through an <code><a class="el" href="namespaceboard.html#a7abd24b042402c0691c0ad6db604e7da" title="Defines all digital output pins of target MCU, usable as pin change interrupt (PCI) pins.">board::InterruptPin</a></code>.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">NTIMER_</td><td>the AVR timer of the <code><a class="el" href="classtimer_1_1_r_t_t.html" title="API to handle a real-time timer.">timer::RTT</a></code> to use for this sonar </td></tr>
    <tr><td class="paramname">TRIGGER_</td><td>the <code><a class="el" href="namespaceboard.html#a5082846fef8fdfb8c8cbcf1163c7b404" title="Defines all available digital input/output pins of the target MCU.">board::DigitalPin</a></code> connected to the sensor trigger pin; that can be any available pin. </td></tr>
    <tr><td class="paramname">ECHO_</td><td>the <code><a class="el" href="namespaceboard.html#a7abd24b042402c0691c0ad6db604e7da" title="Defines all digital output pins of target MCU, usable as pin change interrupt (PCI) pins.">board::InterruptPin</a></code> connected to the sensor echo pin</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classtimer_1_1_r_t_t.html" title="API to handle a real-time timer.">timer::RTT</a> </dd>
<dd>
<a class="el" href="classdevices_1_1sonar_1_1_h_c_s_r04.html">HCSR04</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="sonar_8h_source.html#l00954">954</a> of file <a class="el" href="sonar_8h_source.html">sonar.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="aaf92144d703d09314a02aaf53bdc9b74" name="aaf92144d703d09314a02aaf53bdc9b74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf92144d703d09314a02aaf53bdc9b74">&#9670;&#160;</a></span>SonarType</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="namespacedevices_1_1sonar.html#aaf92144d703d09314a02aaf53bdc9b74">devices::sonar::SonarType</a> : uint8_t</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This enum defines the different modes, supported by <code><a class="el" href="classdevices_1_1sonar_1_1_h_c_s_r04.html">HCSR04</a></code>, to calculate the echo pin pulse duration. </p>
<p >Note that you typically do not need this type, neither <code><a class="el" href="classdevices_1_1sonar_1_1_h_c_s_r04.html">HCSR04</a></code>; you should rather use type aliases instead: <code>BLOCKING_HCSR04</code>, <code>ASYNC_INT_HCSR04</code> or <code>ASYNC_PCINT_HCSR04</code>.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="namespacedevices_1_1sonar.html#a1609913f480a742890ace74e1882ac5e" title="This template class supports one HC-SR04 sonar (or equivalent sensor), connected to the MCU via 2 pin...">BLOCKING_HCSR04</a> </dd>
<dd>
<a class="el" href="namespacedevices_1_1sonar.html#a549182f59f1965da0341ffc4137f3a1e" title="This template class supports one HC-SR04 sonar (or equivalent sensor), connected to the MCU via 2 pin...">ASYNC_INT_HCSR04</a> </dd>
<dd>
ASYNC_PCIINT_HCSR04 </dd>
<dd>
<a class="el" href="classdevices_1_1sonar_1_1_h_c_s_r04.html">HCSR04</a> </dd>
<dd>
<a class="el" href="classdevices_1_1sonar_1_1_h_c_s_r04.html#a20893e3685ab8e1774496ba4fe4de911" title="Send a trigger pulse on this sonar and wait until an echo pulse is received, or timeout_ms has elapse...">HCSR04::echo_us()</a> </dd></dl>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aaf92144d703d09314a02aaf53bdc9b74a72323e5457d8fb855145bfee934aa415" name="aaf92144d703d09314a02aaf53bdc9b74a72323e5457d8fb855145bfee934aa415"></a>BLOCKING&#160;</td><td class="fielddoc"><p >In this mode, the <code><a class="el" href="classdevices_1_1sonar_1_1_h_c_s_r04.html">HCSR04</a></code> will block until the echo pulse is received. </p>
</td></tr>
<tr><td class="fieldname"><a id="aaf92144d703d09314a02aaf53bdc9b74adea23c77e6b206537cb20a44485130be" name="aaf92144d703d09314a02aaf53bdc9b74adea23c77e6b206537cb20a44485130be"></a>ASYNC_INT&#160;</td><td class="fielddoc"><p >In this mode, the echo pin is a <code><a class="el" href="namespaceboard.html#adea66670db50b076b2c145657aa587f7" title="Defines all digital output pins of target MCU, usable as direct external interrupt pins.">board::ExternalInterruptPin</a></code> and the <a class="el" href="classdevices_1_1sonar_1_1_h_c_s_r04.html">HCSR04</a> will use interrupts to calculate the echo pulse duration. </p>
<p >When this mode is used, one registration macro must be called among <code>REGISTER_HCSR04_INT_ISR*</code>. </p>
</td></tr>
<tr><td class="fieldname"><a id="aaf92144d703d09314a02aaf53bdc9b74a4a15eb39b3355ce7db6b06e422f8b322" name="aaf92144d703d09314a02aaf53bdc9b74a4a15eb39b3355ce7db6b06e422f8b322"></a>ASYNC_PCINT&#160;</td><td class="fielddoc"><p >In this mode, the echo pin is a <code><a class="el" href="namespaceboard.html#a7abd24b042402c0691c0ad6db604e7da" title="Defines all digital output pins of target MCU, usable as pin change interrupt (PCI) pins.">board::InterruptPin</a></code> and the <a class="el" href="classdevices_1_1sonar_1_1_h_c_s_r04.html">HCSR04</a> will use interrupts to calculate the echo pulse duration. </p>
<p >When this mode is used, one registration macro must be called among <code>REGISTER_HCSR04_PCI_ISR*</code>. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="sonar_8h_source.html#l00570">570</a> of file <a class="el" href="sonar_8h_source.html">sonar.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad1f46b1fd69d9c8c486867572a3cfd89" name="ad1f46b1fd69d9c8c486867572a3cfd89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1f46b1fd69d9c8c486867572a3cfd89">&#9670;&#160;</a></span>echo_us_to_distance_mm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static constexpr uint16_t devices::sonar::echo_us_to_distance_mm </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>echo_us</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method converts the echo duration, in microseconds, to the distance between the sensor and the reflecting obstacle, in millimeters. </p>
<p >This method is <code>constexpr</code> hence it can be evaluated at compile-time (for more code size and speed efficiency) when provided a constant argument.</p>
<p >Note that the calculation accounts for the fact that <code>echo_us</code> is the time for a complete roundtrip of the ultrasonic wave, i.e. the time needed for the wave to cover twice the distance between the sensor and the reflecting obstacle.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">echo_us</td><td>the echo pulse duration, in microseconds </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the distance, in millimeters, between the sensor and the obstacle </dd></dl>

<p class="definition">Definition at line <a class="el" href="sonar_8h_source.html#l00526">526</a> of file <a class="el" href="sonar_8h_source.html">sonar.h</a>.</p>

</div>
</div>
<a id="af3bc97f71928347fa7b883f166235916" name="af3bc97f71928347fa7b883f166235916"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3bc97f71928347fa7b883f166235916">&#9670;&#160;</a></span>distance_mm_to_echo_us()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static constexpr uint16_t devices::sonar::distance_mm_to_echo_us </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>distance_mm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method converts the disatnce, in millimeters, between the sensor and a reflecting object, into the expected echo duration, in microseconds. </p>
<p >This method is <code>constexpr</code> hence it can be evaluated at compile-time (for more code size and speed efficiency) when provided a constant argument. It can thus be used to calculate constant echo durations based on "threshold" distances that your program may need to specifically address.</p>
<p >Note that the calculation accounts for the fact that the echo duration is the time for a complete roundtrip of the ultrasonic wave, i.e. the time needed for the wave to cover twice the distance between the sensor and the reflecting obstacle.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">distance_mm</td><td>the distance, in millimeters, between the sensor and the obstacle </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the echo pulse duration, in microseconds, expected for <code>distance_mm</code> </dd></dl>

<p class="definition">Definition at line <a class="el" href="sonar_8h_source.html#l00550">550</a> of file <a class="el" href="sonar_8h_source.html">sonar.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a45348626a8f4f1dad995f9376cc92770" name="a45348626a8f4f1dad995f9376cc92770"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45348626a8f4f1dad995f9376cc92770">&#9670;&#160;</a></span>SPEED_OF_SOUND</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr const uint32_t devices::sonar::SPEED_OF_SOUND = 340UL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The approximate speed of sound (and ultrasonic) waves, in the air, expressed in meters per second. </p>
<p >This constant is useful everytime we need to convert echo durations from the ultrasonic sensor to a concrete distance. </p>

<p class="definition">Definition at line <a class="el" href="sonar_8h_source.html#l00509">509</a> of file <a class="el" href="sonar_8h_source.html">sonar.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacedevices.html">devices</a></li><li class="navelem"><a class="el" href="namespacedevices_1_1sonar.html">sonar</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
